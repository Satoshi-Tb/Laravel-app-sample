                                                                                                                                                                                                                                                                        
  # Render デプロイ構成移行ステップ                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                        
  1. Dockerfile を Render 用構成に更新                                                                                                                                                                                                                                  
     - 既存 `Dockerfile` を Nginx + PHP-FPM 用に書き換える。                                                                                                                                                                                                            
     - `nginx` や `php-fpm` を起動する `entrypoint.sh` を用意する。                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                        
  2. 設定ファイルの追加                                                                                                                                                                                                                                                 
     - `docker/render/nginx/default.conf` を追加して `public` を配信し、FastCGI で `index.php` に転送。                                                                                                                                                                 
     - `docker/render/php-fpm/www.conf` を追加して FPM の `listen` や `clear_env` を調整。                                                                                                                                                                              
     - `docker/render/entrypoint.sh` に migrate → `php-fpm` → `nginx` の起動処理を実装し、実行権限を付与。                                                                                                                                                              
                                                                                                                                                                                                                                                                        
  3. Render 設定の更新                                                                                                                                                                                                                                                  
     - Render 管理画面（または `render.yaml`）で Dockerfile パスを `Dockerfile` のまま（新しい内容）にする。                                                                                                                                                            
     - Start Command を `./docker/render/entrypoint.sh` へ変更。                                                                                                                                                                                                        
     - Release Command を `php artisan migrate --force` に分離することを検討。
                                                                                                                                                                                                                                                                        
  4. CI/CD の確認                                                                                                                                                                                                                                                       
     - `.github/workflows/deploy.yml` は現状のまま利用（テスト完了後に Render deploy hook を叩く）。                                                                                                                                                                    
     - 必要に応じて、GitHub Actions で `docker build -f Dockerfile --target production` などの確認ステップを追加。                                                                                                                                                      
                                                                                                                                                                                                                                                                        
  5. ローカルでの事前検証                                                                                                                                                                                                                                               
     - `docker build -t laravel-render .`                                                                                                                                                                                                                               
     - `docker run --rm -p 8080:8080 laravel-render`                                                                                                                                                                                                                    
     - ブラウザで `http://localhost:8080/` を開き、Nginx 経由でアプリが動作するか確認。                                                                                                                                                                                 
                                                                                                                                                                                                                                                                        
  6. デプロイ後の検証                                                                                                                                                                                                                                                   
     - Render ログで `php-fpm` と `nginx` が両方起動していることを確認。                                                                                                                                                                                                
     - `/health` やトップページでレスポンスが正しいかチェック。                                                                                                                                                                                                         
     - 必要に応じて HTTPS 設定やリダイレクトなどを調整。                                                                                                                 
